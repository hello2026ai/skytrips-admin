{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/buddh/skytrips-admin/src/components/InviteUserModal.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\n\r\ntype Role = \"super_admin\" | \"manager\" | \"agent\";\r\n\r\ninterface InviteUserModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onInvite: (data: any) => Promise<void>;\r\n  initialData?: { id?: string; fullName?: string; email?: string; role?: Role };\r\n  title?: string;\r\n  submitLabel?: string;\r\n}\r\n\r\nexport function InviteUserModal({ isOpen, onClose, onInvite, initialData, title, submitLabel }: InviteUserModalProps) {\r\n  const [fullName, setFullName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [selectedRole, setSelectedRole] = useState<Role>(\"super_admin\");\r\n  const [mfaEnabled, setMfaEnabled] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Close on escape key\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === \"Escape\" && isOpen) onClose();\r\n    };\r\n    window.addEventListener(\"keydown\", handleEscape);\r\n    return () => window.removeEventListener(\"keydown\", handleEscape);\r\n  }, [isOpen, onClose]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setFullName(initialData?.fullName || \"\");\r\n      setEmail(initialData?.email || \"\");\r\n      setSelectedRole(initialData?.role || \"super_admin\");\r\n    }\r\n  }, [isOpen, initialData]);\r\n  \r\n  if (!isOpen) return null;\r\n\r\n  const handleSubmit = async () => {\r\n    setIsSubmitting(true);\r\n    try {\r\n      await onInvite({ id: initialData?.id, fullName, email, role: selectedRole, mfaEnabled });\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6\">\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"fixed inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity\" \r\n        onClick={onClose}\r\n        aria-hidden=\"true\"\r\n      />\r\n\r\n      {/* Modal Content */}\r\n      <div \r\n        ref={modalRef}\r\n        className=\"relative w-full max-w-2xl transform rounded-2xl bg-white shadow-2xl transition-all animate-in fade-in zoom-in-95 duration-200\"\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n        aria-labelledby=\"modal-title\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between border-b border-slate-100 px-8 py-6\">\r\n          <h2 id=\"modal-title\" className=\"text-xl font-bold text-slate-900\">\r\n            {title || \"Invite New User\"}\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"rounded-full p-2 text-slate-400 hover:bg-slate-50 hover:text-slate-600 transition-colors\"\r\n            aria-label=\"Close modal\"\r\n          >\r\n            <span className=\"material-symbols-outlined text-[24px]\">close</span>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Body */}\r\n        <div className=\"px-8 py-6 space-y-8\">\r\n          {/* Inputs Row */}\r\n          <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2\">\r\n            <div className=\"space-y-2\">\r\n              <label htmlFor=\"fullName\" className=\"text-sm font-bold text-slate-700\">\r\n                Full Name\r\n              </label>\r\n              <input\r\n                id=\"fullName\"\r\n                type=\"text\"\r\n                value={fullName}\r\n                onChange={(e) => setFullName(e.target.value)}\r\n                placeholder=\"e.g. John Doe\"\r\n                className=\"w-full rounded-lg border border-slate-200 px-4 py-2.5 text-sm text-slate-900 placeholder:text-slate-400 focus:border-teal-600 focus:ring-1 focus:ring-teal-600 transition-colors\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label htmlFor=\"email\" className=\"text-sm font-bold text-slate-700\">\r\n                Email Address\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                placeholder=\"john@company.com\"\r\n                className=\"w-full rounded-lg border border-slate-200 px-4 py-2.5 text-sm text-slate-900 placeholder:text-slate-400 focus:border-teal-600 focus:ring-1 focus:ring-teal-600 transition-colors\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Assign Role */}\r\n          <div className=\"space-y-4\">\r\n            <label className=\"text-sm font-bold text-slate-700 block\">\r\n              Assign Role\r\n            </label>\r\n            <div className=\"space-y-3\">\r\n              {/* Super Admin Option */}\r\n              <label \r\n                className={`relative flex cursor-pointer rounded-xl border p-4 transition-all ${\r\n                  selectedRole === \"super_admin\" \r\n                    ? \"border-teal-600 bg-teal-50/30 ring-1 ring-teal-600\" \r\n                    : \"border-slate-200 hover:border-slate-300\"\r\n                }`}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"role\"\r\n                  value=\"super_admin\"\r\n                  checked={selectedRole === \"super_admin\"}\r\n                  onChange={() => setSelectedRole(\"super_admin\")}\r\n                  className=\"sr-only\"\r\n                />\r\n                <div className=\"flex w-full items-start gap-3\">\r\n                  <div className={`mt-0.5 flex size-5 shrink-0 items-center justify-center rounded-full border ${\r\n                    selectedRole === \"super_admin\"\r\n                      ? \"border-teal-600 bg-teal-600\"\r\n                      : \"border-slate-300 bg-white\"\r\n                  }`}>\r\n                    {selectedRole === \"super_admin\" && (\r\n                      <span className=\"size-2 rounded-full bg-white\" />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-bold text-slate-900\">Super Admin</div>\r\n                    <p className=\"mt-1 text-sm text-slate-500\">\r\n                      Full system access, including billing, user management, and security settings.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </label>\r\n\r\n              {/* Manager Option */}\r\n              <label \r\n                className={`relative flex cursor-pointer rounded-xl border p-4 transition-all ${\r\n                  selectedRole === \"manager\" \r\n                    ? \"border-teal-600 bg-teal-50/30 ring-1 ring-teal-600\" \r\n                    : \"border-slate-200 hover:border-slate-300\"\r\n                }`}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"role\"\r\n                  value=\"manager\"\r\n                  checked={selectedRole === \"manager\"}\r\n                  onChange={() => setSelectedRole(\"manager\")}\r\n                  className=\"sr-only\"\r\n                />\r\n                <div className=\"flex w-full items-start gap-3\">\r\n                  <div className={`mt-0.5 flex size-5 shrink-0 items-center justify-center rounded-full border ${\r\n                    selectedRole === \"manager\"\r\n                      ? \"border-teal-600 bg-teal-600\"\r\n                      : \"border-slate-300 bg-white\"\r\n                  }`}>\r\n                    {selectedRole === \"manager\" && (\r\n                      <span className=\"size-2 rounded-full bg-white\" />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-bold text-slate-900\">Manager</div>\r\n                    <p className=\"mt-1 text-sm text-slate-500\">\r\n                      Ability to manage all bookings, edit tours, and view operational reports.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </label>\r\n\r\n              {/* Agent Option */}\r\n              <label \r\n                className={`relative flex cursor-pointer rounded-xl border p-4 transition-all ${\r\n                  selectedRole === \"agent\" \r\n                    ? \"border-teal-600 bg-teal-50/30 ring-1 ring-teal-600\" \r\n                    : \"border-slate-200 hover:border-slate-300\"\r\n                }`}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"role\"\r\n                  value=\"agent\"\r\n                  checked={selectedRole === \"agent\"}\r\n                  onChange={() => setSelectedRole(\"agent\")}\r\n                  className=\"sr-only\"\r\n                />\r\n                <div className=\"flex w-full items-start gap-3\">\r\n                  <div className={`mt-0.5 flex size-5 shrink-0 items-center justify-center rounded-full border ${\r\n                    selectedRole === \"agent\"\r\n                      ? \"border-teal-600 bg-teal-600\"\r\n                      : \"border-slate-300 bg-white\"\r\n                  }`}>\r\n                    {selectedRole === \"agent\" && (\r\n                      <span className=\"size-2 rounded-full bg-white\" />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-bold text-slate-900\">Agent</div>\r\n                    <p className=\"mt-1 text-sm text-slate-500\">\r\n                      Can view, create, and edit bookings. Limited access to system settings.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          {/* MFA Toggle */}\r\n          {/* <div className=\"flex items-center justify-between rounded-xl border border-slate-100 bg-slate-50/50 p-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"flex size-10 shrink-0 items-center justify-center rounded-full bg-white shadow-sm text-teal-700\">\r\n                <span className=\"material-symbols-outlined\">verified_user</span>\r\n              </div>\r\n              <div>\r\n                <div className=\"font-bold text-slate-900\">Enable Multi-Factor Authentication</div>\r\n                <p className=\"text-sm text-slate-500\">Require an extra security step for this user</p>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={() => setMfaEnabled(!mfaEnabled)}\r\n              className={`relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-teal-600 focus:ring-offset-2 ${\r\n                mfaEnabled ? \"bg-teal-700\" : \"bg-slate-200\"\r\n              }`}\r\n              role=\"switch\"\r\n              aria-checked={mfaEnabled}\r\n            >\r\n              <span\r\n                aria-hidden=\"true\"\r\n                className={`pointer-events-none inline-block size-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${\r\n                  mfaEnabled ? \"translate-x-5\" : \"translate-x-0\"\r\n                }`}\r\n              />\r\n            </button>\r\n          </div> */}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-end gap-3 border-t border-slate-100 px-8 py-5 bg-slate-50/30 rounded-b-2xl\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"rounded-lg px-4 py-2.5 text-sm font-bold text-slate-600 hover:bg-slate-100 hover:text-slate-800 transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={isSubmitting}\r\n            className=\"rounded-lg bg-teal-700 px-6 py-2.5 text-sm font-bold text-white shadow-sm hover:bg-teal-800 disabled:opacity-50 transition-all\"\r\n          >\r\n            {isSubmitting ? \"Saving...\" : (submitLabel || \"Send Invitation\")}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/buddh/skytrips-admin/src/types/email-event.ts"],"sourcesContent":["export enum EmailEventType {\r\n  UserCreated = \"user.created\",\r\n}\r\n\r\nexport type EmailEvent = {\r\n  type: EmailEventType;\r\n  data: Record<string, string>;\r\n}"],"names":[],"mappings":";;;;AAAO,IAAA,AAAK,wCAAA;;WAAA"}},
    {"offset": {"line": 501, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/buddh/skytrips-admin/src/app/dashboard/users/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { InviteUserModal } from \"@/components/InviteUserModal\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { EmailEventType } from \"@/types/email-event\";\r\n\r\ntype UserRow = {\r\n  id: string;\r\n  email: string;\r\n  first_name?: string;\r\n  last_name?: string;\r\n  phone?: string;\r\n  role?: string;\r\n  is_active?: boolean;\r\n  is_verified?: boolean;\r\n  created_at?: string;\r\n  avatar_key?: string;\r\n  last_login_at?: string | null;\r\n};\r\n\r\nexport default function UsersPage() {\r\n  const [data, setData] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [q, setQ] = useState(\"\");\r\n  const [page, setPage] = useState(1);\r\n  const pageSize = 10;\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const [isInviteModalOpen, setIsInviteModalOpen] = useState(false);\r\n  const [editingUser, setEditingUser] = useState<any | null>(null);\r\n  const [deleteOpen, setDeleteOpen] = useState(false);\r\n  const [deleteTarget, setDeleteTarget] = useState<any | null>(null);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [roleFilter, setRoleFilter] = useState<string>(\"\");\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"\");\r\n  const [verifiedFilter, setVerifiedFilter] = useState<string>(\"\");\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const from = (page - 1) * pageSize;\r\n      const to = from + pageSize - 1;\r\n      let query = supabase.from(\"users\").select(\"*\", { count: \"exact\" }).order(\"created_at\", { ascending: false }).range(from, to);\r\n      if (q) {\r\n        query = query.or(`email.ilike.*${q}*,first_name.ilike.*${q}*,last_name.ilike.*${q}*,phone.ilike.*${q}*`);\r\n      }\r\n      if (roleFilter) {\r\n        query = query.eq(\"role\", roleFilter);\r\n      }\r\n      if (statusFilter) {\r\n        query = query.eq(\"is_active\", statusFilter === \"active\");\r\n      }\r\n      if (verifiedFilter) {\r\n        query = query.eq(\"is_verified\", verifiedFilter === \"verified\");\r\n      }\r\n      const { data: rows, count, error: fetchError } = await query;\r\n      if (fetchError) throw fetchError;\r\n      const normalized = (rows || []).map((u: UserRow) => {\r\n        const username = u.first_name ? u.first_name : (u.email?.split(\"@\")[0] || \"\");\r\n        const roleKey = u.role || \"\";\r\n        const roleDisplay = roleKey\r\n          ? roleKey.split(\"_\").map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(\" \")\r\n          : \"\";\r\n        return {\r\n          ...u,\r\n          username,\r\n          role: roleDisplay,\r\n          role_key: roleKey,\r\n          status: u.is_active ? \"active\" : \"inactive\",\r\n          last_login: u.last_login_at || \"\",\r\n          displayId: `#USR-${String(u.id).substring(0, 4)}`\r\n        };\r\n      });\r\n      setData(normalized);\r\n      setTotalCount(count || 0);\r\n    } catch (e) {\r\n      const message = e instanceof Error ? e.message : \"Failed to fetch users\";\r\n      setError(message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [q, page, roleFilter, statusFilter, verifiedFilter]);\r\n  useEffect(() => {\r\n    const channel = supabase\r\n      .channel(\"public:users\")\r\n      .on(\"postgres_changes\", { event: \"*\", schema: \"public\", table: \"users\" }, () => {\r\n        fetchData();\r\n      })\r\n      .subscribe();\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, []);\r\n\r\n  // Pagination logic\r\n  const totalPages = Math.ceil(totalCount / pageSize);\r\n  const getPageButtons = (current: number, total: number) => {\r\n    const result: (number | string)[] = [];\r\n    if (total <= 7) {\r\n      for (let i = 1; i <= total; i++) result.push(i);\r\n      return result;\r\n    }\r\n    result.push(1);\r\n    const start = Math.max(2, current - 1);\r\n    const end = Math.min(total - 1, current + 1);\r\n    if (start > 2) result.push(\"...\");\r\n    for (let i = start; i <= end; i++) result.push(i);\r\n    if (end < total - 1) result.push(\"...\");\r\n    result.push(total);\r\n    return result;\r\n  };\r\n  const pageButtons = getPageButtons(page, totalPages);\r\n\r\n  const handleInviteUser = async (payload: any) => {\r\n    const fullName: string = payload?.fullName || \"\";\r\n    const email: string = (payload?.email || \"\").trim();\r\n    const role: string = payload?.role || \"agent\";\r\n    const parts = fullName.trim().split(\" \");\r\n    const first_name = parts[0] || \"\";\r\n    const last_name = parts.slice(1).join(\" \") || \"\";\r\n    if (!email) {\r\n      setError(\"Email is required\");\r\n      return;\r\n    }\r\n    if (payload?.id) {\r\n      const { error: updateError } = await supabase\r\n        .from(\"users\")\r\n        .update({ email, first_name, last_name, role })\r\n        .eq(\"id\", payload.id);\r\n      if (updateError) {\r\n        setError(updateError.message);\r\n        return;\r\n      }\r\n    } else {\r\n      const { count: existingCount, error: existsError } = await supabase\r\n        .from(\"users\")\r\n        .select(\"id\", { count: \"exact\" })\r\n        .eq(\"email\", email);\r\n      if (existsError) {\r\n        setError(existsError.message);\r\n        return;\r\n      }\r\n      if ((existingCount || 0) > 0) {\r\n        setError(\"Email already exists\");\r\n        return;\r\n      }\r\n      const id = crypto.randomUUID();\r\n      const { error: insertError } = await supabase.from(\"users\").insert([\r\n        { id, email, first_name, last_name, role, is_active: true, is_verified: false }\r\n      ]);\r\n      if (insertError) {\r\n        setError(insertError.message);\r\n        return;\r\n      }\r\n      try {\r\n        const payload = {\r\n          type: EmailEventType.UserCreated,\r\n          data: { email, fullName, role }\r\n        };\r\n        await fetch(\"/api/events\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(payload)\r\n        });\r\n      } catch {}\r\n    }\r\n    fetchData();\r\n    setIsInviteModalOpen(false);\r\n    setEditingUser(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto w-full font-display pb-12\">\r\n      <InviteUserModal \r\n        isOpen={isInviteModalOpen} \r\n        onClose={() => {\r\n          setIsInviteModalOpen(false);\r\n          setEditingUser(null);\r\n        }}\r\n        onInvite={handleInviteUser}\r\n        initialData={\r\n          editingUser\r\n            ? {\r\n                id: editingUser.id,\r\n                fullName: [editingUser.first_name, editingUser.last_name].filter(Boolean).join(\" \"),\r\n                email: editingUser.email,\r\n                role: editingUser.role_key || \"agent\"\r\n              }\r\n            : undefined\r\n        }\r\n        title={editingUser ? \"Edit User\" : \"Invite New User\"}\r\n        submitLabel={editingUser ? \"Save Changes\" : \"Send Invitation\"}\r\n      />\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight text-slate-900\">User Management</h1>\r\n          <p className=\"text-slate-500 mt-1 text-sm\">Manage internal access levels and staff credentials.</p>\r\n        </div>\r\n        <button\r\n          onClick={() => setIsInviteModalOpen(true)}\r\n          className=\"inline-flex items-center gap-2 rounded-lg border border-teal-700 px-4 py-2.5 text-sm font-bold text-teal-700 bg-white hover:bg-teal-50 transition-colors shadow-sm\"\r\n        >\r\n          <span className=\"material-symbols-outlined text-[20px]\">person_add</span>\r\n          Invite New User\r\n        </button>\r\n      </div>\r\n\r\n      {/* Table Card */}\r\n      <div className=\"bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm\">\r\n        {error && (\r\n          <div className=\"px-6 py-4 bg-red-50 text-red-700 border-b border-red-200\">{error}</div>\r\n        )}\r\n        <div className=\"px-6 py-4 border-b border-slate-100 bg-white\">\r\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-5\">\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"relative\">\r\n                <span className=\"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[18px]\">search</span>\r\n                <input\r\n                  value={q}\r\n                  onChange={(e) => {\r\n                    setPage(1);\r\n                    setQ(e.target.value);\r\n                  }}\r\n                  placeholder=\"Search name, email, phone\"\r\n                  className=\"w-full rounded-lg border border-slate-200 pl-10 pr-3 py-2.5 text-sm text-slate-900 placeholder:text-slate-400 focus:border-teal-600 focus:ring-1 focus:ring-teal-600 transition-colors\"\r\n                  type=\"text\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <select\r\n                value={roleFilter}\r\n                onChange={(e) => {\r\n                  setPage(1);\r\n                  setRoleFilter(e.target.value);\r\n                }}\r\n                className=\"w-full rounded-lg border border-slate-200 px-3 py-2.5 text-sm text-slate-900 focus:border-teal-600 focus:ring-1 focus:ring-teal-600 transition-colors bg-white\"\r\n              >\r\n                <option value=\"\">All Roles</option>\r\n                <option value=\"super_admin\">Super Admin</option>\r\n                <option value=\"manager\">Manager</option>\r\n                <option value=\"agent\">Agent</option>\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <select\r\n                value={statusFilter}\r\n                onChange={(e) => {\r\n                  setPage(1);\r\n                  setStatusFilter(e.target.value);\r\n                }}\r\n                className=\"w-full rounded-lg border border-slate-200 px-3 py-2.5 text-sm text-slate-900 focus:border-teal-600 focus:ring-1 focus:ring-teal-600 transition-colors bg-white\"\r\n              >\r\n                <option value=\"\">All Status</option>\r\n                <option value=\"active\">Active</option>\r\n                <option value=\"inactive\">Inactive</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <select\r\n                value={verifiedFilter}\r\n                onChange={(e) => {\r\n                  setPage(1);\r\n                  setVerifiedFilter(e.target.value);\r\n                }}\r\n                className=\"w-full rounded-lg border border-slate-200 px-3 py-2.5 text-sm text-slate-900 focus:border-teal-600 focus:ring-1 focus:ring-teal-600 transition-colors bg-white\"\r\n              >\r\n                <option value=\"\">All Verification</option>\r\n                <option value=\"verified\">Verified</option>\r\n                <option value=\"unverified\">Unverified</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-3\">\r\n            <button\r\n              onClick={() => {\r\n                setQ(\"\");\r\n                setRoleFilter(\"\");\r\n                setStatusFilter(\"\");\r\n                setVerifiedFilter(\"\");\r\n                setPage(1);\r\n              }}\r\n              className=\"inline-flex items-center gap-1 rounded-lg border border-slate-200 px-3 py-2 text-xs font-bold text-slate-600 bg-white hover:bg-slate-50 transition-colors\"\r\n            >\r\n              <span className=\"material-symbols-outlined text-[16px]\">filter_alt_off</span>\r\n              Reset filters\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full text-left text-sm\">\r\n            <thead className=\"bg-white text-slate-400 font-bold uppercase text-xs border-b border-slate-100\">\r\n              <tr>\r\n                <th className=\"px-6 py-5 font-bold tracking-wider\">User</th>\r\n                <th className=\"px-6 py-5 font-bold tracking-wider\">Email Address</th>\r\n                <th className=\"px-6 py-5 font-bold tracking-wider\">Role</th>\r\n                <th className=\"px-6 py-5 font-bold tracking-wider\">Status</th>\r\n                <th className=\"px-6 py-5 font-bold tracking-wider\">Verified</th>\r\n                <th className=\"px-6 py-5 font-bold tracking-wider\">Last Login</th>\r\n                <th className=\"px-6 py-5 font-bold tracking-wider text-right\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-slate-50\">\r\n              {loading ? (\r\n                <tr>\r\n                  <td colSpan={6} className=\"px-6 py-8\">\r\n                    <div className=\"flex items-center justify-center gap-3 text-slate-600\">\r\n                      <span className=\"size-5 border-2 border-slate-300 border-t-teal-600 rounded-full animate-spin\"></span>\r\n                      Loading users...\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : data.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={6} className=\"px-6 py-8 text-center text-slate-500\">\r\n                    No users found matching your criteria.\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                data.map((u) => (\r\n                  <tr key={u.id} className=\"hover:bg-slate-50/80 transition-colors group\">\r\n                    {/* User Column */}\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"size-10 rounded-full bg-orange-100 flex items-center justify-center text-orange-600 font-bold text-sm\">\r\n                          {u.first_name?.[0] || u.username[0] || \"U\"}\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"font-bold text-slate-900\">\r\n                            {[u.first_name, u.last_name].filter(Boolean).join(\" \") || u.username}\r\n                          </div>\r\n                          <div className=\"text-xs text-slate-400 font-medium mt-0.5\">\r\n                            ID: {`${u.id}`}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    \r\n                    {/* Email Column */}\r\n                    <td className=\"px-6 py-4 text-slate-600 font-medium\">\r\n                      {u.email}\r\n                    </td>\r\n                    \r\n                    {/* Role Column */}\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`inline-flex items-center px-2.5 py-1 rounded-md text-xs font-bold ${\r\n                        u.role_key === \"super_admin\" \r\n                          ? \"bg-teal-50 text-teal-700 border border-teal-100\" \r\n                          : \"bg-slate-100 text-slate-600 border border-slate-200\"\r\n                      }`}>\r\n                        {u.role}\r\n                      </span>\r\n                    </td>\r\n                    \r\n                    {/* Status Column */}\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className={`size-2 rounded-full ${\r\n                          u.status === \"active\" ? \"bg-green-500\" : \"bg-slate-300\"\r\n                        }`}></span>\r\n                        <span className={`text-sm font-bold ${\r\n                          u.status === \"active\" ? \"text-slate-700\" : \"text-slate-400\"\r\n                        }`}>\r\n                          {u.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n                        </span>\r\n                      </div>\r\n                    </td>\r\n                    \r\n                    {/* Verified Column */}\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className={`size-2 rounded-full ${\r\n                          u.is_verified ? \"bg-teal-600\" : \"bg-slate-300\"\r\n                        }`}></span>\r\n                        <span className={`text-sm font-bold ${\r\n                          u.is_verified ? \"text-slate-700\" : \"text-slate-400\"\r\n                        }`}>\r\n                          {u.is_verified ? \"Verified\" : \"Unverified\"}\r\n                        </span>\r\n                      </div>\r\n                    </td>\r\n                    \r\n                    {/* Last Login Column */}\r\n                    <td className=\"px-6 py-4 text-slate-500\">\r\n                      {u.last_login ? new Date(u.last_login).toLocaleString() : \"Never\"}\r\n                    </td>\r\n                    \r\n                    {/* Actions Column */}\r\n                    <td className=\"px-6 py-4 text-right\">\r\n                      <div className=\"flex items-center justify-end gap-1 opacity-60 group-hover:opacity-100 transition-opacity\">\r\n                        <button\r\n                          onClick={() => {\r\n                            setEditingUser(u);\r\n                            setIsInviteModalOpen(true);\r\n                          }}\r\n                          className=\"p-2 text-slate-400 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors\"\r\n                          title=\"Edit\"\r\n                        >\r\n                          <span className=\"material-symbols-outlined text-[18px]\">edit</span>\r\n                        </button>\r\n                        <button\r\n                          onClick={() => {\r\n                            setDeleteTarget(u);\r\n                            setDeleteOpen(true);\r\n                          }}\r\n                          className=\"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                          title=\"Delete\"\r\n                        >\r\n                          <span className=\"material-symbols-outlined text-[18px]\">delete</span>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {deleteOpen && (\r\n          <div\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n            aria-labelledby=\"delete-title\"\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center\"\r\n            onClick={(e) => {\r\n              if (e.target === e.currentTarget) setDeleteOpen(false);\r\n            }}\r\n          >\r\n            <div className=\"absolute inset-0 bg-black/40\"></div>\r\n            <div className=\"relative bg-white rounded-xl shadow-2xl border border-slate-200 w-full max-w-md mx-4\">\r\n              <div className=\"px-6 py-4 border-b border-slate-100 flex items-center gap-2\">\r\n                <span className=\"material-symbols-outlined text-[20px] text-red-600\">warning</span>\r\n                <h2 id=\"delete-title\" className=\"text-lg font-bold text-slate-900\">\r\n                  Confirm Deletion\r\n                </h2>\r\n              </div>\r\n              <div className=\"px-6 py-4 space-y-3\">\r\n                <div className=\"text-sm text-slate-700\">\r\n                  User: <span className=\"font-medium\">{[deleteTarget?.first_name, deleteTarget?.last_name].filter(Boolean).join(\" \") || deleteTarget?.email}</span>\r\n                </div>\r\n                <p className=\"text-xs text-red-600\">\r\n                  This action cannot be undone. The user will be permanently deleted.\r\n                </p>\r\n              </div>\r\n              <div className=\"px-6 py-4 flex items-center justify-end gap-3 border-t border-slate-100\">\r\n                <button\r\n                  onClick={() => setDeleteOpen(false)}\r\n                  className=\"px-4 py-2 rounded-lg border border-slate-200 text-slate-700 text-sm font-bold hover:bg-slate-50\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={async () => {\r\n                    if (!deleteTarget) return;\r\n                    setIsDeleting(true);\r\n                    const { error: delError } = await supabase.from(\"users\").delete().eq(\"id\", deleteTarget.id);\r\n                    setIsDeleting(false);\r\n                    if (delError) {\r\n                      setError(delError.message);\r\n                    }\r\n                    setDeleteOpen(false);\r\n                    setDeleteTarget(null);\r\n                    fetchData();\r\n                  }}\r\n                  disabled={isDeleting}\r\n                  className=\"px-4 py-2 rounded-lg bg-red-600 text-white text-sm font-bold hover:bg-red-700 disabled:opacity-50 flex items-center gap-2\"\r\n                >\r\n                  {isDeleting && <span className=\"size-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></span>}\r\n                  <span>Delete User</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"px-6 py-4 border-t border-slate-100 flex items-center justify-between\">\r\n          <div className=\"text-sm text-slate-500 font-medium\">\r\n            {totalCount === 0 ? (\r\n              <>Showing <span className=\"font-bold text-slate-900\">0</span> of <span className=\"font-bold text-slate-900\">0</span> users</>\r\n            ) : (\r\n              <>Showing <span className=\"font-bold text-slate-900\">{(page - 1) * pageSize + 1}-{Math.min(page * pageSize, totalCount)}</span> of <span className=\"font-bold text-slate-900\">{totalCount}</span> users</>\r\n            )}\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <button\r\n              disabled={page === 1 || totalPages <= 1}\r\n              onClick={() => setPage((p) => Math.max(1, p - 1))}\r\n              className=\"size-8 flex items-center justify-center rounded-lg border border-slate-200 text-slate-500 hover:bg-slate-50 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n            >\r\n              <span className=\"material-symbols-outlined text-[16px]\">chevron_left</span>\r\n            </button>\r\n            {pageButtons.map((p, i) => (\r\n              <button\r\n                key={i}\r\n                onClick={() => typeof p === \"number\" && setPage(Math.min(Math.max(1, p), totalPages))}\r\n                disabled={typeof p !== \"number\" || totalPages <= 1}\r\n                className={`size-8 flex items-center justify-center rounded-lg text-sm font-bold transition-colors ${\r\n                  p === page\r\n                    ? \"bg-teal-700 text-white shadow-sm\"\r\n                    : typeof p === \"number\"\r\n                    ? \"text-slate-600 hover:bg-slate-50\"\r\n                    : \"text-slate-400 cursor-default\"\r\n                }`}\r\n              >\r\n                {p}\r\n              </button>\r\n            ))}\r\n            <button\r\n              disabled={page >= totalPages || totalPages <= 1}\r\n              onClick={() => setPage((p) => Math.min(totalPages, p + 1))}\r\n              className=\"size-8 flex items-center justify-center rounded-lg border border-slate-200 text-slate-500 hover:bg-slate-50 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n            >\r\n              <span className=\"material-symbols-outlined text-[16px]\">chevron_right</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}